@page
@{
    Layout = "~/Views/Shared/Dashboard_Layout.cshtml";
}

<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<link rel="stylesheet" href="~/css/feedback.css" />
<div class="container">
    <!-- Facility Carousel Section -->
    <section class="facility-carousel-section">
        <h2>Explore Our Facilities</h2>
        <p>Select a facility to learn more</p>
        
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <!-- Facility 1: Function Hall -->
                <div class="swiper-slide facility-card" data-facility-id="1">
                    <div class="facility-image">
                        <img src="~/images/function-hall.jpg" alt="Function Hall">
                        <div class="facility-rating"><span>4.8 ★</span></div>
                    </div>
                    <div class="facility-details">
                        <h3>Function Hall</h3>
                    </div>
                </div>

                <!-- Facility 2: Sports Court -->
                <div class="swiper-slide facility-card" data-facility-id="2">
                    <div class="facility-image">
                        <img src="~/images/sports-court.jpg" alt="Sports Court">
                        <div class="facility-rating"><span>4.6 ★</span></div>
                    </div>
                    <div class="facility-details">
                        <h3>Sports Court</h3>
                    </div>
                </div>

                <!-- Facility 3: Swimming Pool -->
                <div class="swiper-slide facility-card" data-facility-id="3">
                    <div class="facility-image">
                        <img src="~/images/swimming-pool.jpg" alt="Swimming Pool">
                        <div class="facility-rating"><span>4.9 ★</span></div>
                    </div>
                    <div class="facility-details">
                        <h3>Swimming Pool</h3>
                    </div>
                </div>

                <!-- Facility 4: Gym Facility -->
                <div class="swiper-slide facility-card" data-facility-id="4">
                    <div class="facility-image">
                        <img src="~/images/gym.jpg" alt="Gym Facility">
                        <div class="facility-rating"><span>4.7 ★</span></div>
                    </div>
                    <div class="facility-details">
                        <h3>Gym Facility</h3>
                    </div>
                </div>
            </div>
            <div class="swiper-pagination"></div>
        </div>
    </section>

    <!-- Feedback Section -->
    <section class="feedback-section">
        <div class="feedback-header">
            <h1>Customer Feedback</h1>
            <p>Share your experience with <span class="selected-facility">Function Hall</span></p>
        </div>
        
        <!-- Rating Summary -->
        <div class="rating-summary">
            <div class="overall-rating">
                <div class="rating-number">4.8</div>
                <div class="rating-stars">★★★★☆</div>
                <div class="rating-count">124 reviews</div>
            </div>
            
            <div class="rating-details">
                <div class="rating-item">
                    <span class="rating-label">Cleanliness</span>
                    <div class="rating-bar">
                        <div class="bar-fill cleanliness-bar" style="width: 92%;"></div>
                    </div>
                    <span class="rating-value cleanliness-value">4.6</span>
                </div>
                
                <div class="rating-item">
                    <span class="rating-label">Equipment</span>
                    <div class="rating-bar">
                        <div class="bar-fill equipment-bar" style="width: 88%;"></div>
                    </div>
                    <span class="rating-value equipment-value">4.4</span>
                </div>
                
                <div class="rating-item">
                    <span class="rating-label">Staff</span>
                    <div class="rating-bar">
                        <div class="bar-fill staff-bar" style="width: 90%;"></div>
                    </div>
                    <span class="rating-value staff-value">4.5</span>
                </div>
                
                <div class="rating-item">
                    <span class="rating-label">Value</span>
                    <div class="rating-bar">
                        <div class="bar-fill value-bar" style="width: 86%;"></div>
                    </div>
                    <span class="rating-value value-value">4.3</span>
                </div>
            </div>
        </div>
        
        <!-- Feedback Form -->
        <div class="feedback-form">
            <h3>Share Your Experience</h3>
            <form id="feedbackForm">
                <input type="hidden" id="facilityId" value="1">
                
                <div class="form-group">
                    <label>Your Overall Rating</label>
                    <div class="star-rating">
                        <span class="star" data-value="1">★</span>
                        <span class="star" data-value="2">★</span>
                        <span class="star" data-value="3">★</span>
                        <span class="star" data-value="4">★</span>
                        <span class="star" data-value="5">★</span>
                        <input type="hidden" id="overallRating" name="overallRating" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Category Ratings</label>
                    <div class="category-ratings">
                        <div class="category-item">
                            <span>Cleanliness</span>
                            <div class="category-stars">
                                <span class="cat-star" data-category="cleanliness" data-value="1">★</span>
                                <span class="cat-star" data-category="cleanliness" data-value="2">★</span>
                                <span class="cat-star" data-category="cleanliness" data-value="3">★</span>
                                <span class="cat-star" data-category="cleanliness" data-value="4">★</span>
                                <span class="cat-star" data-category="cleanliness" data-value="5">★</span>
                                <input type="hidden" id="cleanlinessRating" name="cleanlinessRating" required>
                            </div>
                        </div>
                        
                        <div class="category-item">
                            <span>Equipment</span>
                            <div class="category-stars">
                                <span class="cat-star" data-category="equipment" data-value="1">★</span>
                                <span class="cat-star" data-category="equipment" data-value="2">★</span>
                                <span class="cat-star" data-category="equipment" data-value="3">★</span>
                                <span class="cat-star" data-category="equipment" data-value="4">★</span>
                                <span class="cat-star" data-category="equipment" data-value="5">★</span>
                                <input type="hidden" id="equipmentRating" name="equipmentRating" required>
                            </div>
                        </div>
                        
                        <div class="category-item">
                            <span>Staff</span>
                            <div class="category-stars">
                                <span class="cat-star" data-category="staff" data-value="1">★</span>
                                <span class="cat-star" data-category="staff" data-value="2">★</span>
                                <span class="cat-star" data-category="staff" data-value="3">★</span>
                                <span class="cat-star" data-category="staff" data-value="4">★</span>
                                <span class="cat-star" data-category="staff" data-value="5">★</span>
                                <input type="hidden" id="staffRating" name="staffRating" required>
                            </div>
                        </div>
                        
                        <div class="category-item">
                            <span>Value</span>
                            <div class="category-stars">
                                <span class="cat-star" data-category="value" data-value="1">★</span>
                                <span class="cat-star" data-category="value" data-value="2">★</span>
                                <span class="cat-star" data-category="value" data-value="3">★</span>
                                <span class="cat-star" data-category="value" data-value="4">★</span>
                                <span class="cat-star" data-category="value" data-value="5">★</span>
                                <input type="hidden" id="valueRating" name="valueRating" required>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="feedback-title">Title</label>
                    <input type="text" id="feedback-title" name="feedbackTitle" placeholder="Summarize your experience" required>
                </div>
                
                <div class="form-group">
                    <label for="feedback-comment">Your Feedback</label>
                    <textarea id="feedback-comment" name="feedbackComment" rows="5" placeholder="Share details of your experience..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Add Photos (Optional)</label>
                    <div class="photo-upload">
                        <div class="upload-box" id="uploadTrigger">
                            <span>+</span>
                            <p>Add Photo</p>
                            <input type="file" id="photoUpload" name="feedbackPhotos" accept="image/*" multiple style="display: none;">
                        </div>
                        <div class="upload-preview" id="uploadPreview"></div>
                    </div>
                </div>
                
                <button type="submit" class="submit-button">Submit Feedback</button>
            </form>
        </div>
        
        <!-- Feedback List -->
        <div class="feedback-list">
            <div class="feedback-list-header">
                <h3>Recent Reviews</h3>
                <div class="sort-options">
                    <span>Sort by:</span>
                    <select id="sortReviews">
                        <option value="newest">Newest First</option>
                        <option value="highest">Highest Rating</option>
                        <option value="lowest">Lowest Rating</option>
                    </select>
                </div>
            </div>
            
            <div class="feedback-items-container">
                <!-- Reviews will be loaded dynamically based on selected facility -->
            </div>
            
            <button class="load-more-button">Load More Reviews</button>
        </div>
    </section>
</div>

<!-- Success Modal -->
<div class="modal" id="successModal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-icon success">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3>Thank You!</h3>
        <p>Your feedback has been submitted successfully.</p>
        <button class="modal-button">OK</button>
    </div>
</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script src="~/js/feedback.js" asp-append-version="true"></script>
