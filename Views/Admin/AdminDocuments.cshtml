@{
    Layout = "~/Views/Shared/Admin_Layout.cshtml";
    ViewData["Title"] = "Document Management";
    ViewData["Subtitle"] = "Administrator Control Panel";
}

<link rel="stylesheet" href="~/css/admin/documents.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

<div class="admin-documents-container">
    <div class="admin-header">
        <div>
            <h1>@ViewData["Title"] <span class="admin-badge">ADMIN</span></h1>
            <p class="subtitle">@ViewData["Subtitle"]</p>
        </div>
        <div class="document-stats">
            <div class="stat-item">
                <span class="stat-number">1,248</span>
                <span class="stat-label">Total Documents</span>
            </div>
        </div>
    </div>

    <!-- Admin Action Bar -->
    <div class="admin-action-bar">
        <button class="admin-action-btn btn-admin-primary" id="adminUploadBtn">
            <i class="fas fa-upload"></i> Upload Documents
        </button>
        <button class="admin-action-btn btn-admin-primary" id="adminCreateFolderBtn">
            <i class="fas fa-folder-plus"></i> New Folder
        </button>
        <button class="admin-action-btn btn-admin-secondary" id="bulkActionsBtn">
            <i class="fas fa-tasks"></i> Bulk Actions
        </button>
        <button class="admin-action-btn btn-admin-danger" id="adminTrashBtn">
            <i class="fas fa-trash"></i> Trash (24)
        </button>
    </div>

    <!-- Admin Control Panel -->
    <div class="admin-control-panel">
        <div class="admin-quick-actions">
            <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
            <div class="quick-action-item">
                <i class="fas fa-file-import"></i> Import Documents
            </div>
            <div class="quick-action-item">
                <i class="fas fa-file-export"></i> Export Document List
            </div>
            <div class="quick-action-item">
                <i class="fas fa-user-shield"></i> Permission Manager
            </div>
            <div class="quick-action-item">
                <i class="fas fa-history"></i> View Activity Log
            </div>
            <div class="quick-action-item">
                <i class="fas fa-tags"></i> Manage Categories
            </div>
            <div class="quick-action-item">
                <i class="fas fa-water"></i> Add Watermarks
            </div>
        </div>

        <div class="documents-content">
            <!-- Breadcrumb Navigation -->
            <div class="breadcrumb" id="adminBreadcrumb">
                <a href="#" class="breadcrumb-item root" data-id="root">All Documents</a>
            </div>

            <!-- Documents Grid -->
            <div class="admin-documents-grid" id="adminDocumentsGrid">
                <!-- Folders will be displayed here -->
                <div class="admin-folder-item" data-id="confidential">
                    <span class="folder-badge">12 items</span>
                    <i class="fas fa-folder"></i>
                    <span class="folder-name">Confidential</span>
                    <div class="folder-actions">
                        <button class="btn-action edit" title="Edit Folder"><i class="fas fa-cog"></i></button>
                    </div>
                </div>
                
                <!-- Documents will be displayed here -->
                <div class="admin-document-item" data-id="doc1">
                    <div class="document-icon-admin">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="document-info-admin">
                        <div class="document-name-admin">2024 Budget Proposal.pdf</div>
                        <div class="document-meta-admin">
                            <span class="document-type">Financial</span>
                            <span class="document-date">Jan 15, 2024</span>
                            <span class="document-size">4.2 MB</span>
                        </div>
                        <span class="document-visibility visibility-board">Board Only</span>
                    </div>
                    <div class="document-actions-admin">
                        <button class="btn-action download" title="Download"><i class="fas fa-download"></i></button>
                        <button class="btn-action security" title="Security"><i class="fas fa-lock"></i></button>
                        <button class="btn-action history" title="Version History"><i class="fas fa-history"></i></button>
                        <button class="btn-action delete" title="Delete"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Admin Document Preview -->
<div class="admin-document-preview" id="adminDocumentPreview">
    <div class="preview-header-admin">
        <h3>Document Details</h3>
        <button class="btn-close-preview" id="adminClosePreviewBtn"><i class="fas fa-times"></i></button>
    </div>
    <div class="preview-content-admin">
        <div class="preview-meta-admin">
            <div class="meta-row">
                <span class="meta-label">Document Name:</span>
                <span class="meta-value" id="previewDocName">2024 Budget Proposal.pdf</span>
            </div>
            <div class="meta-row">
                <span class="meta-label">Type:</span>
                <span class="meta-value" id="previewDocType">Financial Report</span>
            </div>
            <div class="meta-row">
                <span class="meta-label">Uploaded:</span>
                <span class="meta-value" id="previewDocDate">January 15, 2024 by Admin</span>
            </div>
            <div class="meta-row">
                <span class="meta-label">Size:</span>
                <span class="meta-value" id="previewDocSize">4.2 MB</span>
            </div>
            <div class="meta-row">
                <span class="meta-label">Visibility:</span>
                <span class="meta-value" id="previewDocVisibility">Board Members Only</span>
            </div>
            <div class="meta-row">
                <span class="meta-label">Downloads:</span>
                <span class="meta-value" id="previewDocDownloads">14</span>
            </div>
        </div>

        <div class="version-history">
            <h4><i class="fas fa-code-branch"></i> Version History</h4>
            <div class="version-item">
                <div>
                    <span class="version-number">Version 1.2</span>
                    <span class="version-date">Updated: Jan 10, 2024</span>
                </div>
                <div class="version-actions">
                    <button class="btn-action" title="Restore"><i class="fas fa-undo"></i></button>
                    <button class="btn-action" title="Download"><i class="fas fa-download"></i></button>
                </div>
            </div>
            <div class="version-item">
                <div>
                    <span class="version-number">Version 1.1</span>
                    <span class="version-date">Updated: Dec 15, 2023</span>
                </div>
                <div class="version-actions">
                    <button class="btn-action" title="Restore"><i class="fas fa-undo"></i></button>
                    <button class="btn-action" title="Download"><i class="fas fa-download"></i></button>
                </div>
            </div>
        </div>

        <div class="access-log">
            <h4><i class="fas fa-list"></i> Recent Access</h4>
            <div class="access-log-item">
                <span class="access-user">John Smith (Board)</span>
                <span class="access-time">Today, 10:45 AM</span>
                <div class="access-action">Downloaded</div>
            </div>
            <div class="access-log-item">
                <span class="access-user">Sarah Johnson (Admin)</span>
                <span class="access-time">Yesterday, 3:22 PM</span>
                <div class="access-action">Viewed</div>
            </div>
        </div>
    </div>
    <div class="preview-actions-admin">
        <button class="btn-admin-primary" id="adminDownloadBtn"><i class="fas fa-download"></i> Download</button>
        <button class="btn-admin-secondary" id="adminSecurityBtn"><i class="fas fa-lock"></i> Security</button>
        <button class="btn-admin-secondary" id="adminReplaceBtn"><i class="fas fa-exchange-alt"></i> Replace</button>
        <button class="btn-admin-danger" id="adminDeleteBtn"><i class="fas fa-trash"></i> Delete</button>
    </div>
</div>

<!-- Admin Upload Modal -->
<div class="admin-modal" id="adminUploadModal">
    <div class="admin-modal-content">
        <div class="admin-modal-header">
            <h3>Upload Documents</h3>
        </div>
        <div class="admin-modal-body">
            <form id="adminUploadForm">
                <div class="admin-form-group">
                    <label for="adminDocumentFiles">Select Files</label>
                    <input type="file" id="adminDocumentFiles" multiple class="admin-form-control">
                    <div class="file-requirements">
                        <p>Max 10 files, 50MB total. Formats: PDF, DOCX, XLSX, PPTX, JPG, PNG</p>
                    </div>
                </div>
                
                <div class="admin-form-group">
                    <label for="adminDocumentFolder">Destination Folder</label>
                    <select id="adminDocumentFolder" class="admin-form-control">
                        <option value="root">Root Directory</option>
                        <option value="confidential">Confidential</option>
                        <option value="financial">Financial</option>
                        <option value="meetings">Meetings</option>
                    </select>
                </div>
                
                <div class="admin-form-group">
                    <label for="adminDocumentVisibility">Default Visibility</label>
                    <select id="adminDocumentVisibility" class="admin-form-control">
                        <option value="public">Public (All homeowners)</option>
                        <option value="board">Board Members Only</option>
                        <option value="admin">Administrators Only</option>
                        <option value="custom">Custom Permissions...</option>
                    </select>
                </div>
                
                <div class="admin-form-group">
                    <label>
                        <input type="checkbox" id="adminWatermarkOption"> Apply watermark with user info to PDFs
                    </label>
                </div>
                
                <div class="admin-form-group">
                    <label>
                        <input type="checkbox" id="adminDisableDownload"> Disable downloading (view only)
                    </label>
                </div>
            </form>
        </div>
        <div class="admin-modal-footer">
            <button type="button" class="btn-admin-secondary" id="adminUploadCancelBtn">Cancel</button>
            <button type="button" class="btn-admin-primary" id="adminUploadSubmitBtn">Upload Documents</button>
        </div>
    </div>
</div>

<!-- Security Settings Modal -->
<div class="admin-modal" id="securityModal">
    <div class="admin-modal-content">
        <div class="admin-modal-header">
            <h3>Document Security Settings</h3>
        </div>
        <div class="admin-modal-body">
            <form id="securityForm">
                <div class="admin-form-group">
                    <label for="securityLevel">Access Level</label>
                    <select id="securityLevel" class="admin-form-control">
                        <option value="public">Public (All homeowners)</option>
                        <option value="board" selected>Board Members Only</option>
                        <option value="admin">Administrators Only</option>
                        <option value="custom">Custom Permissions...</option>
                    </select>
                </div>
                
                <div class="admin-form-group" id="customPermissionsSection" style="display:none;">
                    <label>Select Allowed Groups/Users</label>
                    <div class="permission-options">
                        <div class="permission-option">
                            <input type="checkbox" id="permBoard" checked>
                            <label for="permBoard">Board Members</label>
                        </div>
                        <div class="permission-option">
                            <input type="checkbox" id="permFinance">
                            <label for="permFinance">Finance Committee</label>
                        </div>
                        <div class="permission-option">
                            <input type="checkbox" id="permArch">
                            <label for="permArch">Architectural Committee</label>
                        </div>
                    </div>
                    
                    <div class="admin-form-group">
                        <label>Add Specific Users</label>
                        <input type="text" class="admin-form-control" placeholder="Search homeowners...">
                    </div>
                </div>
                
                <div class="admin-form-group">
                    <label for="downloadRestriction">Download Restrictions</label>
                    <select id="downloadRestriction" class="admin-form-control">
                        <option value="allow">Allow Downloading</option>
                        <option value="watermark">Allow with Watermark</option>
                        <option value="restrict">View Only (No Download)</option>
                    </select>
                </div>
                
                <div class="admin-form-group">
                    <label for="expirationDate">Expiration Date (Optional)</label>
                    <input type="date" id="expirationDate" class="admin-form-control">
                </div>
            </form>
        </div>
        <div class="admin-modal-footer">
            <button type="button" class="btn-admin-secondary" id="securityCancelBtn">Cancel</button>
            <button type="button" class="btn-admin-primary" id="securitySaveBtn">Save Settings</button>
        </div>
    </div>
</div>

<script src="~/js/admin/documents.js" asp-append-version="true"></script>